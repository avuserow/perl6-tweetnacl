all: %DESTDIR%/libtweetnacl%SO%

%DESTDIR%/libtweetnacl%SO%: tweetnacl%O% devurandom%O%
	    %LD% %LDSHARED% %LDFLAGS% %LIBS% %LDOUT%%DESTDIR%/libtweetnacl%SO% $^

tweetnacl%O%: tweetnacl/src/tweetnacl.c
	    %CC% -c %CCSHARED% %CCFLAGS% %CCOUT% $@ $^

devurandom%O%: tweetnacl/contrib/randombytes/devurandom.c
	    %CC% -c %CCSHARED% %CCFLAGS% %CCOUT% $@ $^

test: all
	prove -ve 'perl6 -Ilib' t
